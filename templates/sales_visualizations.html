<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales Visualizations</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <div class="container my-5">
        <h1 class="text-center">Sales Visualizations</h1>
        <br>

        <!-- Graph Sections -->
        <div class="row my-4">
            <div class="col-md-12 d-flex justify-content-between align-items-center">
                <h3>Number of Sales Weekly</h3>
                <button class="btn btn-info" onclick="openGraph('sales')">Show Graph</button>
            </div>
        </div>

        <div class="row my-4">
            <div class="col-md-12 d-flex justify-content-between align-items-center">
                <h3>Number of Customers Weekly</h3>
                <button class="btn btn-info" onclick="openGraph('customers')">Show Graph</button>
            </div>
        </div>

        <div class="row my-4">
            <div class="col-md-12 d-flex justify-content-between align-items-center">
                <h3>Sales per Customer Weekly</h3>
                <button class="btn btn-info" onclick="openGraph('sale_cus')">Show Graph</button>
            </div>
        </div>

        <div class="row my-4">
            <div class="col-md-12 d-flex justify-content-between align-items-center">
                <h3>Frequency of Items Sold</h3>
                <button class="btn btn-info" onclick="openGraph('items')">Show Graph</button>
            </div>
        </div>

        <div class="row my-4">
            <div class="col-md-12 d-flex justify-content-between align-items-center">
                <h3>Top 20 customers based on items purchased</h3>
                <button class="btn btn-info" onclick="openGraph('top20')">Show Graph</button>
            </div>
        </div>

        <div class="row my-4">
            <div class="col-md-12 d-flex justify-content-between align-items-center">
                <h3>Sales per Day of the Week</h3>
                <button class="btn btn-info" onclick="openGraph('day')">Show Graph</button>
            </div>
        </div>

        <div class="row my-4">
            <div class="col-md-12 d-flex justify-content-between align-items-center">
                <h3>Number of Sales per Day of the Week</h3>
                <button class="btn btn-info" onclick="openGraph('wday')">Show Graph</button>
            </div>
        </div>

        <div class="row my-4">
            <div class="col-md-12 d-flex justify-content-between align-items-center">
                <h3>Number of Sales per Month</h3>
                <button class="btn btn-info" onclick="openGraph('month')">Show Graph</button>
            </div>
        </div>

        <div class="row my-4">
            <div class="col-md-12 d-flex justify-content-between align-items-center">
                <h3>Number of Sales per Day in Month</h3>
                <button class="btn btn-info" onclick="openGraph('monthday')">Show Graph</button>
            </div>
        </div>

        <div class="mt-5">
            <a href="{% url 'index' %}" class="btn btn-secondary">Back to Dashboard</a>
        </div>
    </div>

    <div class="modal fade" id="graphModal" tabindex="-1" aria-labelledby="graphModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="graphModalLabel"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="graphContainer"></div>
                </div>
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>


    <script>
        function openGraph(id) {
            var graphHtml = document.getElementById(id).innerHTML;
            document.getElementById('graphContainer').innerHTML = graphHtml;
            var graphModal = new bootstrap.Modal(document.getElementById('graphModal'));
            document.getElementById('graphModalLabel').innerHTML = id;
            graphModal.show();
        }
    </script>


    <div id="sales" style="display: none;">{{ fig_sales_html|safe }}</div>
    <div id="customers" style="display: none;">{{ fig_customers_html|safe }}</div>
    <div id="sale_cus" style="display: none;">{{ fig_sale_cus_html|safe }}</div>
    <div id="items" style="display: none;">{{ fig_items_html|safe }}</div>
    <div id="top20" style="display: none;">{{ fig_top20_html|safe }}</div>
    <div id="day" style="display: none;">{{ fig_day_html|safe }}</div>
    <div id="wday" style="display: none;">{{ fig_wday_html|safe }}</div>
    <div id="month" style="display: none;">{{ fig_month_html|safe }}</div>
    <div id="monthday" style="display: none;">{{ fig_monthday_html|safe }}</div>

</body>
</html>
